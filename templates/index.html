$def with (banners, zone)

$var title: Lista de banners


<style type="text/css">
    td.file img {
          max-width: 150px;
          max-height: 100px;
      }
     
     td.link span {
         display: block;
     }
     
     td.link {
         max-width: 250px;
         font-size: 0.75em;
     }
     td.file {
         padding: 1px;
         text-align: center;
      }
</style>

$def menu_items():
    <li class="todo">
        $if zone != '':
            <a href="/$:medium">TODO</a>
        $else:
            <a class="act_link" href="/$:medium">TODO</a>
    </li>
    $for z in zones:
        <li class="$z[0]">
            $if zone != z[0]:
                <a href="/$:medium?zone=$z[0]">Zona $z[0] ($z[1]x$z[2])</a>
            $else:
                <a class="act_link" href="/$:medium?zone=$z[0]">Zona $z[0] ($z[1]x$z[2])</a>
        </li>
$var menu: $:menu_items()


$if not banners:
    <h2>Ningún banner a mostrar</h2>


$code:
    def rating(banner):
        return banner.views / banner.clicks

<script>
jQuery(document).ready(function() {
    jQuery('.main_menu_index').addClass('active');
});
</script>

<table class="table table-striped table-bordered table-condensed table-mod">

$ last_zone = None
$for banner in banners:
    $if last_zone != banner.zone:
        <thead><tr>
            <th>Zona</th>
            <th>Peso</th>
            <th>Banner</th>
            <th>Link</th>
            <th>Colocación</th>
            <th>Impresiones</th>
            <th>Clicks</th>
            <th>Acciones</th>
        </tr></thead><tbody>
    $ last_zone = banner.zone
    <tr class="$banner.zone">
        <td class="zone">
            $if banner.zone:
                <a href="http://ad.openmultimedia.biz/$:medium/$banner.zone/">$banner.zone</a></big></strong>
                $if banner.subzone:
                    / <a href="http://ad.openmultimedia.biz/$:medium/$banner.zone/$banner.subzone/">$banner.subzone</a></big></strong>
        </td>
        <td class="weight">$banner.weight</td>
        <td class="file">
            $if banner_get_type(banner) == 'image':
                <a href="$banner.file"><img src="/$banner.file"></a>
            $if banner_get_type(banner) == 'video':
                <a href="$banner.file"><img src="/${banner.file}.jpg"></a>
            $if banner_get_type(banner) == 'flash':
                <a href="$banner.file"><img src="/$banner.file"></a>
        </td>
        <td class="link">
            $if banner.link:
                <a href="$banner.link" target="_blank">$banner.link</a>
                <span>
                $if banner.link_mode == 0:
                    abre en la misma página
                $elif banner.link_mode == 1:
                    abre nueva ventana/pestaña
                $elif banner.link_mode == 2:
                    abre ventana emergente (pop-up)
                </span>
        </td>
        <td class="created_at">$:strftime(banner.created_at, '%d-%m-%Y<br />%H:%M:%S')</td>
        <td class="views">$:formatWithCommas('%i', banner.views)</td>
        <td class="clicks">$:formatWithCommas('%i', banner.clicks)</td>
        <td class="actions"><a href="/$:medium/edit/$banner.id">Editar</a>
    </tr>

</tbody></table>
</div>
